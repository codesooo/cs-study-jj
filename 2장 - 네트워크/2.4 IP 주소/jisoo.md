## 2.4.1 ARP (Address Resolution Protocol)
> 보통 컴퓨터-컴퓨터 간의 통신은 IP 주소를 기반으로 한다고 알고 있지만, 정확히 이야기하면 IP 주소에서 ARP를 통해 MAC 주소를 찾아 MAC 주소를 기반으로 통신한다.

**ARP** 는 `IP 주소`로부터 `MAC 주소`를 구하는, 즉 IP와 MAC 주소의 **다리 역할**을 하는 프로토콜이다.


- `ARP` : IP 주소(가상 주소) -> MAC 주소(실제 주소) 변환
- `RARP` : MAC 주소(실제 주소) -> IP 주소(가상 주소) 변환


  <br>
#### 동작 과정
1) 장치 A가 **`ARP Request 브로드캐스트`** 를 보낸다.
2) `IP 주소`인 `120.70.80.3`에 해당하는 `MAC 주소`를 찾는다.
3) 해당 `MAC 주소`와 일치하는 장치 B가 **`ARP Reply 유니캐스트`** 를 통해 `MAC 주소`를 반환한다.
4) `IP 주소`에 맞는 `MAC 주소` 찾기 성공!

#### IP주소와 MAC 주소

|구분|IP 주소|MAC 주소|
|:--:|--|--|
|**사용되는 곳**|네트워크 계층|데이터 링크 계층|
|**비유**|배송지 주소|주민번호|
||논리적 주소|물리적 주소|

같은 IP 주소더라도 MAC 주소가 다르면 구별할 수 있다. 만약 IP 주소 대신 MAC 주소만 사용하면 라우팅 테이블에
너무 많은 정보가 기록되어 다운될 것이다. 따라서 IP 주소와 MAC 주소를 모두 이용하는 것이 가장 효율적이다.


  
## 2.4.2 홉바이홉 통신
**IP 주소**를 통해 통신하는 과정이다. 
> 홉(hop)이란, 건너뛰는 모습을 의미한다. 통신망에서 각 패킷이 여러 개의 라우터를 건너가는 모습을 비유적으로 표현한 것이다.
 <br>
`라우터`의 `라우팅 테이블 IP`를 기반으로 패킷을 전달하면서 라우팅을 수행하여 최종 목적지까지 패킷을 전달한다.

### 라우팅 테이블
- 라우터에 있는 목적지 정보들과 그 목적지로 가기 위한 방법이 있는 리스트
- 송신지 -> 수신지까지 도달하기 위해 사용됨
- 목적지에 도달하기 위해 거쳐야 할 다음 라우터 정보를 가지고 있음
- 
### 게이트웨이 gateway
서로 다른 통신망과 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 컴퓨터나 SW를 말한다.
- user는 인터넷에 접속하기 위해 게이트웨이를 거쳐야 한다.
- 서로 다른 네트워크상의 통신 프로토콜을 변환해주는 역할을 하기도 한다.
- 라우팅  테이블을 통해 게이트웨이 확인 가능
  
<br>

## 2.4.3 IP 주소 체계
IP 주소는 IPv4와 IPv6로 나뉜다. 
- `IPv4` : 32비트를 8비트 단위로 끊어서 표기
  - ex) 123.45.67.89
- `IPv6` : 64비트를 16비트 단위로 끊어서 표기
  - ex) 2001:db8:ff00:42:8329

### 클래스 기반 할당 방식
- A,B,C,D,E 5개의 클래스로 구분
- 앞에 있는 부분 : 네트워크 주소
- 뒤에 있는 부분 :호스트 주소 (컴퓨터에 부여하는 주소)
![image](https://github.com/codesooo/cs-study-jj/assets/88030238/76f0b087-3cda-4d26-b4fc-abf185f96cc6)

- 클래스 A,B,C : 일대일 통신
  - A의 범위 : 0.0.0.0 ~ 127.255.255.255
  - B의 범위 : 128.0.0.0 ~ 191.255.255.255
  - C의 범위 : 192.0.0.0 ~ 223.255.255.255
- 클래스 D : 멀티캐스트 통신
- 클래스 E : 앞으로 사용할 예비용


#### 네트워크 주소와 브로드캐스트용 주소
![image](https://github.com/codesooo/cs-study-jj/assets/88030238/01fd8267-17ed-42a7-8609-20eb661cafd5)
- 12.0.0.0 : 네트워크 구별 주소
- 12.255.255.255 : 브로드캐스트용 주소
- 12.0.0.1 ~ 12.255.255.254 : 컴퓨터에 부여할 수 있는 호스트 주소

### DHCP (Dynamic Host Configuration Protocol)
- IP 주소 및 기타 통신 매개변수를 자동으로 할당하기 위한 네트워크 관리 프로토콜
- 네트워크 장치의 IP 주소를 수동으로 설정할 필요 없이 자동으로 IP 주소 할당
- 가정용 네트워크에 많이 쓰임
### NAT (Network Address Translation)
![image](https://github.com/codesooo/cs-study-jj/assets/88030238/c0d52f50-5ebd-4d06-8528-87b451a15454)

- 패킷이 라우팅 장치를 통해 전송되는 동안 패킷의 IP 주소 정보를 수정하여 IP 주소를 다른 주소로 매핑하는 방법
- IPv4로 감당하지 못하는 많은 주소들을 처리 가능
  - 공인 IP, 사설 IP로 나누어 처리
  
#### 공유기와 NAT
인터넷 공유기에 NAT 기능이 탑재됨 -> 인터넷 회선 하나를 개통하고 인터넷 공유기를 달아서 여러 PC를 사용할 수 있음

#### NAT를 이용한 보안
네트워크에서 사용하는 IP 주소와 외부에 드러나는 IP 주소가 다르기 때문에 내부 네트워크에 대한 보안 가능

#### NAT의 단점
접속하는 호스트의 숫자에 따라서 접속 속도가 느려질 수 있

## 2.4.4 IP 주소를 이용한 위치 정보
IP 주소는 인터넷에서 사용하는 네트워크 주소이다. 따라서, IP 주소를 통해 동 또는 구까지 위치 추적이 가능하다.

## 용어 정리
#### 브로드캐스트
송신 호스트가 전송한 데이터가 네트워크에 연결된 모든 호스트에 전송되는 방식

#### 유니캐스트
고유 주소로 식별된 하나의 네트워크 목적지에 1:1로 데이터를 전송하는 방식
